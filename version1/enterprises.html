<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/favicon.ico">
    <link rel="icon" type="image/png" href="./assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Site Title</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <!-- nav -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
    <link rel="stylesheet" href="./assets/css/navigation.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,300i,400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- CSS -->
    <link href="./assets/css/main.css" rel="stylesheet" />
    <link href="./assets/css/vendor/aos.css" rel="stylesheet" />
    <link href="./assets/css/card.css" rel="stylesheet" />
    <link href="./assets/css/style.css" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        .echarts-map {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>

    <!-- navigaation -->
    <header class="header-area nav-overlay">
        <nav class="navbar navbar-expand-md navbar-dark">
            <div class="container">
                <a href="#" class="navbar-brand">Work</a>

                <div id="main-nav" class="collapse navbar-collapse">
                    <ul class="navbar-nav ml-auto">
                        <li><a href="./work-main.html" class="nav-item nav-link active">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="nav-item nav-link" data-toggle="dropdown">Policy</a>
                            <div class="dropdown-menu">
                                <a href="#" class="dropdown-item">College graduates</a>
                                <a href="#" class="dropdown-item">Migrant worker</a>
                                <a href="#" class="dropdown-item">Entrepreneurship</a>
                            </div>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="nav-item nav-link" data-toggle="dropdown">Enterprise</a>
                            <div class="dropdown-menu">
                                <a href="./enterprises.html" class="dropdown-item">Region</a>
                                <a href="./state-owned.html" class="dropdown-item">State-owned</a>
                                <a href="./individual.html" class="dropdown-item">Individual</a>
                                <a href="./foreign.html" class="dropdown-item">Foreign</a>
                            </div>
                        </li>
                        <li><a href="#" class="nav-item nav-link">Prospect</a></li>
                        <li><a href="#footer" class="nav-item nav-link">Contact us</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!--distribution map-->
        <div class="region">
            <h1 style="margin: 5px;">Enterprises distribution map</h1>
            <div class="echarts-map" id="3dMap"></div>
        </div>

        <div class="enterprises">
            <h1>Famous companies</h1>
            <div class="card-box">
                <div class="card-row">
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="compImg">
                            <img src="./images/company.jpg">
                        </div>
                        <div class="compInf">
                            <div class="title">Title</div>
                            <div class="text">introduction</div>
                            <div class="more-text">more introduction!</div>
                        </div>
                    </div>
                </div>
                <!-- <div class="card-row">
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                </div>
                <div class="card-row">
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div> -->
                </div>
    
            </div>

        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px" y="0px" viewBox="0 0 1440 126" style="enable-background:new 0 0 1440 126;" xml:space="preserve">
            <path class="bg-black"
                d="M685.6,38.8C418.7-11.1,170.2,9.9,0,30v96h1440V30C1252.7,52.2,1010,99.4,685.6,38.8z">
            </path>
        </svg>
        <footer class="bg-black pb-5" id="footer">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-md mr-4">
                        <i class="fas fa-copyright text-white"></i>
                        <small class="d-block mt-3 mb-3 text-muted">EBU6305 Group40 Coursework</small>
                    </div>
                    <div class="col-6 col-md">
                        <h5 class="mb-4 text-white">Policy</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="#">Local graduates</a></li>
                            <li><a class="text-muted" href="#">Migrant workers</a></li>
                            <li><a class="text-muted" href="#">Entrepreneurship</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md">
                        <h5 class="mb-4 text-white">Enterprise</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="#">Region</a></li>
                            <li><a class="text-muted" href="#">State-owned</a></li>
                            <li><a class="text-muted" href="#">Individual</a></li>
                            <li><a class="text-muted" href="#">Foreign</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md">
                        <h5 class="mb-4 text-white">Prospect</h5>
                    </div>
                    <div class="col-6 col-md">
                        <h5 class="mb-4 text-white">Contact us</h5>
                        <p style="color : white">xxxxxxx@xx.xxx</p>

                    </div>
                </div>
            </div>
        </footer>





        <!-- Javascript -->
        <script src="./assets/js/vendor/jquery.min.js" type="text/javascript"></script>
        <script src="./assets/js/vendor/popper.min.js" type="text/javascript"></script>
        <script src="./assets/js/vendor/bootstrap.min.js" type="text/javascript"></script>
        <script src="./assets/js/functions.js" type="text/javascript"></script>
        <script src="./assets/js/nav.js"></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js'></script>
        <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.1.2/echarts.min.js"></script>
        <script>
            //保存echarts实例
            let mapEcharts = null;

            //初次加载中国地图
            //第一个参数:城市编码(成都地图为100000)，第二个参数:是否第一次加载，第一次加载传false
            loadMap(510100, false);

            //请求地图数据
            function loadMap(areaCode, notFirstLoad = true) {
                fetch(`https://raw.githubusercontent.com/jryyy02/Interactive-media/main/geoAtlasJson.json`)
                    .then((res) => res.json())
                    .then((res) => {
                        //第一次加载，不需要注销实例
                        if (notFirstLoad) {
                            //注销实例
                            echarts.dispose(mapEcharts);
                        }
                        //初始化
                        initMap(areaCode, res);
                    })
                    .catch((err) => {
                        alert("最多到县/区");
                    });
            }

            // 地图初始化
            function initMap(mapName, mapData) {
                mapEcharts = echarts.init(document.getElementById("3dMap"));
                // 注册地图
                echarts.registerMap(mapName, mapData);

                // 配置项
                let options = {
                    series: [
                        {
                            name: "map",
                            type: "map", // 地图
                            map: mapName, // 加载注册的地图
                            roam: true, // 鼠标事件
                            data: [], //{name,value} 业务数据
                        },
                    ],
                };
                mapEcharts.setOption(options);
                mapEcharts.on("click", (params) => {
                    //通过城市名称找到对应城市编码
                    const item = allAreaCode.find((i) => i.name === params.name);
                    if (item) {
                        loadMap(item.code);
                    }
                });
            }
        </script>

</body>

</html>
